!function(e,t){"function"==typeof define&&define.amd?define("anyLogger",t):"object"==typeof exports?module.exports=t():e.AnyLogger=t()}(this,function(){var e={},t={},n=0,o=[],r=function(e,t){return t&&(t.scope&&(e="["+t.scope+"]"+e),t.module&&(e="["+t.module+"]"+e),t.date&&(e="["+t.date.toISOString()+"]"+e)),e},l=function(){return{type:"console",write:"undefined"==typeof console?function(){}:function(e,n){var o;n===t.logLevels.WARN&&console.warn?o=console.warn:n===t.logLevels.ERROR&&console.error?o=console.error:n===t.logLevels.INFO&&console.info?o=console.info:n===t.logLevels.DEBUG&&console.debug&&(o=console.debug),o&&o.call(console,e,{noCollect:!0})}}},i=function(e){this.settings={},this.handlers=[],this.capturedLogs=[],this.id=e.id,this.settings.captureLogsLimit=t.defaultCaptureLogsLimit;var n=this;e.captureLogs&&(e.captureLogsLimit&&this.captureLogsLimit(e.captureLogsLimit),this.flushCapturedLogsOnLimit(e.flushCapturedLogsOnLimit),this.flushCapturedLogsOnError(e.flushCapturedLogsOnError),this.captureLogs(!0)),0!=e.logToConsole&&this.handlers.push(l()),o.forEach(function(t){t.create(n,e)}),e.handlers&&e.handlers.forEach(n.addHandler.bind(n)),e.formatter?this.formatter=e.formatter:0!=e.useFormatter&&(this.formatter=r),e.logLevel?this.logLevel(e.logLevel):this.logLevel(t.defaultLogLevel),e.module&&(this.settings.module=e.module),e.collect&&u.call(this)},a=i.prototype;a.logLevel=function(e){return"string"==typeof e&&e.toUpperCase()in t.logLevels?this.settings.logLevel=t.logLevels[e.toUpperCase()]:e&&e.name in t.logLevels&&(this.settings.logLevel=t.logLevels[e.name]),this.settings.logLevel?this.settings.logLevel.name:null},a.captureLogs=function(e){this.settings.captureLogs=e},a.captureLogsLimit=function(e){this.settings.captureLogsLimit=e},a.flushCapturedLogsOnLimit=function(e){this.settings.flushCapturedLogsOnLimit=e},a.flushCapturedLogsOnError=function(e){this.settings.flushCapturedLogsOnError=e},a.debug=function(e,n,o){return this.trigger(e,t.logLevels.DEBUG,n,o)},a.info=function(e,n,o){return this.trigger(e,t.logLevels.INFO,n,o)},a.warn=function(e,n,o){return this.trigger(e,t.logLevels.WARN,n,o)},a.error=function(e,n,o){return this.trigger(e,t.logLevels.ERROR,n,o)},a.trigger=function(e,n,o,r){var l;l=o||{},l.module=l.module||this.settings.module,l.date=new Date,e&&this.formatter&&(e=this.formatter(e,l)),this.settings.captureLogs&&(this.settings.flushCapturedLogsOnError&&n.value>=t.logLevels.ERROR.value?this.flushCapturedLogs(this.settings.flushCapturedLogsOnError.logLevel,this.settings.flushCapturedLogsOnError.handlerTypes):(this.capturedLogs.push({message:e,level:n,data:l}),this.capturedLogs.length>=this.settings.captureLogsLimit&&(this.settings.flushCapturedLogsOnLimit?this.flushCapturedLogs(this.settings.flushCapturedLogsOnLimit.logLevel,this.settings.flushCapturedLogsOnLimit.handlerTypes):this.capturedLogs.shift()))),c.call(this,n)?this.handlers&&this.handlers.constructor===Array&&this.handlers.forEach(function(t){d(o)&&"console"==t.type||s(t,e,n,l,r)}):r&&r(!1)},a.getCapturedLogs=function(){return this.capturedLogs},a.flushCapturedLogs=function(e,n,o){var r,l=this,i=0;r=t.logLevels[e.toUpperCase()],r||(r=t.defaultFlushLogLevel),this.capturedLogs.forEach(function(e){e.level.value>=r.value&&(i++,n&&n.forEach(function(t){s(l.getHandlerByType(t),e.message,e.level,e.data)}))}),this.capturedLogs=[],o&&o(i)},a.getHandlerByType=function(e){var t;return this.handlers.some(function(n){if(n.type===e)return t=n,!0}),t},a.getHandlerTypes=function(){return this.handlers.map(function(e){return e.type})},a.addHandler=function(e){"function"==typeof e?this.handlers.push({type:"custom",write:e}):this.handlers.push(e)};var s=function(e,t,n,o,r){e&&(e.asyncWrite?e.asyncWrite(t,n,o,function(){r&&r(!0)}):(e.write(t,n,o),r&&r(!0)))},u=function(){var e=this;if(console.log){var n=console.log;console.log=function(o,r){r&&r.noCollect||e.trigger(o,t.logLevels.DEBUG,{collected:!0}),n.apply(console,arguments)}}if(console.debug){var o=console.debug;console.debug=function(n,r){r&&r.noCollect||e.trigger(n,t.logLevels.DEBUG,{collected:!0}),o.apply(console,arguments)}}if(console.info){var r=console.info;console.info=function(n,o){o&&o.noCollect||e.trigger(n,t.logLevels.INFO,{collected:!0}),r.apply(console,arguments)}}if(console.warn){var l=console.warn;console.warn=function(n,o){o&&o.noCollect||e.trigger(n,t.logLevels.WARN,{collected:!0}),l.apply(console,arguments)}}if(console.error){var i=console.error;console.error=function(n,o){o&&o.noCollect||e.trigger(n,t.logLevels.ERROR,{collected:!0}),i.apply(console,arguments)}}window.onerror=function(n,o,r,l,i){var a=["Message: "+n,"URL: "+o,"Line: "+r,"Column: "+l];i&&i.stack&&a.push("Stack: "+i.stack),a=a.join(" - "),e.trigger(a,t.logLevels.ERROR,{collected:!0})}},d=function(e){return e&&e.collected},c=function(e){var t=this.settings.logLevel;return e.value>=t.value},g=function(t){t?t.id||(t.id="logger"+n):t={id:"logger"+n};var o=new i(t);return e[o.id]=o,n++,o},f=function(t){return e[t]},h=function(e){e&&"function"==typeof e.create&&o.push(e)};return t.logLevels={},t.logLevels.DEBUG={value:1,name:"DEBUG"},t.logLevels.INFO={value:2,name:"INFO"},t.logLevels.WARN={value:4,name:"WARN"},t.logLevels.ERROR={value:5,name:"ERROR"},t.logLevels.FATAL={value:9,name:"FATAL"},t.logLevels.OFF={value:10,name:"OFF"},t.defaultLogLevel=t.logLevels.OFF,t.defaultFlushLogLevel=t.logLevels.DEBUG,t.defaultCaptureLogsLimit=1e3,{create:g,getLoggerById:f,consts:t,addPlugin:h}}),function(e,t){"function"==typeof define&&define.amd?define("htmlHandler",t):"object"==typeof exports?module.exports=t():e.HTMLHandler=t()}(this,function(){var e=function(e,t){if(t.logToHtml){var n,o,r,l,i=0,a=function(){var e,t,n,o,r,l,i;return e="table[data-sortable]",o=/^-?[£$¤]?[\d,.]+%?$/,i=/^\s+|\s+$/g,n=["click"],l="ontouchstart"in document.documentElement,l&&n.push("touchstart"),t=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},r={init:function(t){var n,o,l,i,a;for(null==t&&(t={}),null==t.selector&&(t.selector=e),o=document.querySelectorAll(t.selector),a=[],l=0,i=o.length;l<i;l++)n=o[l],a.push(r.initTable(n));return a},initTable:function(e){var t,n,o,l,i,a;if(1===(null!=(a=e.tHead)?a.rows.length:void 0)&&"true"!==e.getAttribute("data-sortable-initialized")){for(e.setAttribute("data-sortable-initialized","true"),o=e.querySelectorAll("th"),t=l=0,i=o.length;l<i;t=++l)n=o[t],"false"!==n.getAttribute("data-sortable")&&r.setupClickableTH(e,n,t);return e}},setupClickableTH:function(e,o,l){var i,a,s,u,d,c;for(s=r.getColumnType(e,l),a=function(t){var n,i,a,u,d,c,g,f,h,p,m,v,L,b,y,C,E,T,O,w,x,A,H,R;if(t.handled===!0)return!1;for(t.handled=!0,g="true"===this.getAttribute("data-sorted"),f=this.getAttribute("data-sorted-direction"),a=g?"ascending"===f?"descending":"ascending":s.defaultSortDirection,p=this.parentNode.querySelectorAll("th"),L=0,E=p.length;L<E;L++)o=p[L],o.setAttribute("data-sorted","false"),o.removeAttribute("data-sorted-direction");if(this.setAttribute("data-sorted","true"),this.setAttribute("data-sorted-direction",a),h=e.tBodies[0],c=[],g){for(R=h.rows,C=0,w=R.length;C<w;C++)i=R[C],c.push(i);for(c.reverse(),A=0,x=c.length;A<x;A++)d=c[A],h.appendChild(d)}else{for(v=null!=s.compare?s.compare:function(e,t){return t-e},n=function(e,t){return e[0]===t[0]?e[2]-t[2]:s.reverse?v(t[0],e[0]):v(e[0],t[0])},H=h.rows,u=b=0,T=H.length;b<T;u=++b)d=H[u],m=r.getNodeValue(d.cells[l]),null!=s.comparator&&(m=s.comparator(m)),c.push([m,d,u]);for(c.sort(n),y=0,O=c.length;y<O;y++)d=c[y],h.appendChild(d[1])}return"function"==typeof window.CustomEvent&&"function"==typeof e.dispatchEvent?e.dispatchEvent(new CustomEvent("Sortable.sorted",{bubbles:!0})):void 0},c=[],u=0,d=n.length;u<d;u++)i=n[u],c.push(t(o,i,a));return c},getColumnType:function(e,t){var n,o,l,i,a,s,u,d,c,g,f;if(o=null!=(c=e.querySelectorAll("th")[t])?c.getAttribute("data-sortable-type"):void 0,null!=o)return r.typesObject[o];for(g=e.tBodies[0].rows,a=0,u=g.length;a<u;a++)for(n=g[a],l=r.getNodeValue(n.cells[t]),f=r.types,s=0,d=f.length;s<d;s++)if(i=f[s],i.match(l))return i;return r.typesObject.alpha},getNodeValue:function(e){var t;return e?(t=e.getAttribute("data-value"),null!==t?t:"undefined"!=typeof e.innerText?e.innerText.replace(i,""):e.textContent.replace(i,"")):""},setupTypes:function(e){var t,n,o,l;for(r.types=e,r.typesObject={},l=[],n=0,o=e.length;n<o;n++)t=e[n],l.push(r.typesObject[t.name]=t);return l}},r.setupTypes([{name:"numeric",defaultSortDirection:"descending",match:function(e){return e.match(o)},comparator:function(e){return parseFloat(e.replace(/[^0-9.-]/g,""),10)||0}},{name:"date",defaultSortDirection:"ascending",reverse:!0,match:function(e){return!isNaN(Date.parse(e))},comparator:function(e){return Date.parse(e)||0}},{name:"alpha",defaultSortDirection:"ascending",match:function(){return!0},compare:function(e,t){return e.localeCompare(t)}}]),r},s=function(e){o.tHead.getElementsByTagName("th")[e].click()},u=function(e){var t,n,o=0;if("string"==typeof e)n=e;else{var l=document.getElementById("logTableFilter");n=l.value}n=n.toUpperCase();for(var i=r.getElementsByTagName("tr"),a=0;a<i.length;a++){t=i[a].getElementsByTagName("td");for(var s=0;s<t.length;s++)if(t[s]){if(t[s].innerHTML.toUpperCase().indexOf(n)>-1){i[a].style.display="",o++;break}s===t.length-1&&(i[a].style.display="none")}}return o},d=function(){var e=document.createElement("style");n.appendChild(e),e.innerHTML="#logTable{border-collapse: collapse; height: 100%; width: 100%; display: block;}.log-table-row td{border: 1px solid black;} .log-table-row:nth-child(even){background-color: #d3d3d3}.log-table-row:hover {background-color: #ffffe0}.log-table-header {background-color: #90ee90;}.log-table-header th[data-sortable='false']{cursor: auto;}.log-table-header th{border: 1px solid black; cursor: pointer;}.log-table-header th[data-sorted='true']:after {visibility: visible;}.log-table-header th[data-sorted-direction='descending']:after {border-top-color: inherit;margin-top: 8px;}.log-table-header th[data-sorted-direction='ascending']:after {border-bottom-color: inherit;margin-top: 3px;}.log-table-header th:after {content: ''; visibility: hidden;\tdisplay: inline-block; vertical-align: inherit; height: 0; width: 0; border-width: 5px;\tborder-style: solid; border-color: transparent;\tmargin-right: 1px; margin-left: 10px; float: right;}#logTableFilter {font-size: 16px; padding: 5px 5px 5px 10px; border: 1px solid #ddd; margin: 0 0 12px 0;}#logTableClear {padding: 4px 32px; display: inline-block; cursor: pointer; font-size: 16px; margin: 0 16px 12px 0}";var t=document.createElement("button");t.innerHTML="Clear",t.setAttribute("id","logTableClear"),t.addEventListener("click",c),n.appendChild(t);var i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id","logTableFilter"),i.setAttribute("placeholder","Filter"),i.addEventListener("keyup",u),n.appendChild(i),o=document.createElement("table"),o.id="logTable",o.innerHTML='<thead class="log-table-header"><tr><th>Order</th><th>Date</th><th>Module</th><th>Scope</th><th style="width:100%;">Message</th><th>Level</th></tr></thead><tbody class="log-table-body"></tbody>',n.appendChild(o),r=o.tBodies[0],l=a(),l.initTable(o)},c=function(){i=0,r.innerHTML=""},g=function(e){return e?e:""},f=function(e,t,n,o,l){var a=r.insertRow(-1);a.className="log-table-row",a.innerHTML="<td>"+i+"</td><td>"+l.toLocaleString()+"</td><td>"+g(e)+"</td><td>"+g(t)+"</td><td>"+g(n)+"</td><td>"+o.name+"</td>",i++};t.logToHtml.container?n=t.logToHtml.container:(n=document.createElement("div"),n.style.width="100%",n.style["z-index"]="9999999",document.body.appendChild(n)),d(),e.addHandler({type:"html",write:function(e,t,n){f(n.module,n.scope,e,t,n.date)},sort:s,filter:u,clear:c})}};return{create:e}}),function(e,t){"function"==typeof define&&define.amd?define("serviceHandler",t):"object"==typeof exports?module.exports=t():e.ServiceHandler=t()}(this,function(){var e={},t=function(t,n){var o,r={},l=[],i=0,a=n.logToService;if(a&&a.loggingUrl){var s=function(t){t.headers?t.headers instanceof Array?r.headers=t.headers:r.headers=[t.headers]:r.headers=[e.defaultServiceHeaders],void 0!=t.timeframe?(r.sendBy="timeframe",t.timeframe>e.minTimeframe?r.timeframe=t.timeframe:r.timeframe=e.minTimeframe):r.sendBy="batchSize",(t.flushOnWindowClose||void 0===t.flushOnWindowClose)&&f(),r.timeframe=60*r.timeframe*1e3,r.loggingUrl=t.loggingUrl,r.batchSize=t.batchSize||e.defaultBatchSize,r.timeout=t.timeout||e.defaultTimeout,r.requestParser=t.requestParser,"timeframe"===r.sendBy&&(o=setInterval(c,r.timeframe,!1))},u=function(e,t,n,o,i){l.push({message:n,level:o.name,module:e,scope:t,date:i}),"batchSize"===r.sendBy&&l.length>=r.batchSize&&d(l)},d=function(e){if(!(e.length<1)){var t=new XMLHttpRequest;t.open("POST",r.loggingUrl,!0),r.headers.forEach(function(e){t.setRequestHeader(Object.keys(e)[0],e[Object.keys(e)[0]])});var n;n=r.requestParser?JSON.stringify(r.requestParser(e)):JSON.stringify(e),t.send(n),l=[],i++}},c=function(){d(l)},g=function(){clearInterval(o)},f=function(){window.onbeforeunload=function(){c()}};s(a),t.addHandler({type:"service",write:function(e,t,n){u(n.module,n.scope,e,t,n.date)},flush:c,rowsCount:function(){return l.length},sentCount:function(){return i},destroy:g})}};return{create:t}}),function(e,t){"function"==typeof define&&define.amd?define("anyLoggerMax",["./anyLogger","./htmlHandler","./serviceHandler"],t):"object"==typeof exports?module.exports=t():e.AnyLoggerMax=t(e.AnyLogger,e.HTMLHandler,e.ServiceHandler)}(this,function(e,t,n){return e.addPlugin(t),e.addPlugin(n),e});