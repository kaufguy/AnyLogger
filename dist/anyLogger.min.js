!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.YourModule=b()}(this,function(){var a={},b={},c=0,d=function(a,b){return b&&(b.scope&&(a="["+b.scope+"]"+a),b.module&&(a="["+b.module+"]"+a)),a},e=function(){return{type:"console",write:"undefined"==typeof console?function(){}:function(a,c){var d;c===b.logLevels.WARN&&console.warn?d=console.warn:c===b.logLevels.ERROR&&console.error?d=console.error:c===b.logLevels.INFO&&console.info?d=console.info:c===b.logLevels.DEBUG&&console.debug?d=console.debug:c===b.logLevels.TIME&&console.time&&console.timeEnd&&(d="string"==typeof a?console.time:console.timeEnd),d&&d.call(console,a,{noCollect:!0})}}},f=function(a){var c,d={},e=[],f=0;if(a&&a.loggingUrl){var g=function(a,b,c,f,g){e.push({message:c,level:f.name,module:a,scope:b,date:g}),"batchSize"===d.sendBy&&e.length>=d.batchSize&&h(e)},h=function(a){if(!(a.length<1)){var b=new XMLHttpRequest;b.open("POST",d.loggingUrl,!0),d.headers.forEach(function(a){b.setRequestHeader(Object.keys(a)[0],a[Object.keys(a)[0]])});var c;c=d.requestParser?JSON.stringify(d.requestParser(a)):JSON.stringify(a),b.send(c),e=[],f++}},i=function(){h(e)},j=function(){clearInterval(c)};return function(a){a.headers?a.headers instanceof Array?d.headers=a.headers:d.headers=[a.headers]:d.headers=[b.defaultServiceHeaders],void 0!=a.timeframe?(d.sendBy="timeframe",a.timeframe>b.minTimeframe?d.timeframe=a.timeframe:d.timeframe=b.minTimeframe):d.sendBy="batchSize",d.timeframe=60*d.timeframe*1e3,d.loggingUrl=a.loggingUrl,d.batchSize=a.batchSize||b.defaultBatchSize,d.timeout=a.timeout||b.defaultTimeout,d.requestParser=a.requestParser,"timeframe"===d.sendBy&&(c=setInterval(i,d.timeframe,!1))}(a),{type:"service",write:function(a,b,c){g(c.module,c.scope,a,b,c.date)},flush:i,rowsCount:function(){return e.length},sentCount:function(){return f},destroy:j}}},g=function(a){var b,c,d,e,f=0,g=function(){var a,b,c,d,e,f,g;return a="table[data-sortable]",d=/^-?[£$¤]?[\d,.]+%?$/,g=/^\s+|\s+$/g,c=["click"],f="ontouchstart"in document.documentElement,f&&c.push("touchstart"),b=function(a,b,c){return null!=a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},e={init:function(b){var c,d,f,g,h;for(null==b&&(b={}),null==b.selector&&(b.selector=a),d=document.querySelectorAll(b.selector),h=[],f=0,g=d.length;f<g;f++)c=d[f],h.push(e.initTable(c));return h},initTable:function(a){var b,c,d,f,g,h;if(1===(null!=(h=a.tHead)?h.rows.length:void 0)&&"true"!==a.getAttribute("data-sortable-initialized")){for(a.setAttribute("data-sortable-initialized","true"),d=a.querySelectorAll("th"),b=f=0,g=d.length;f<g;b=++f)c=d[b],"false"!==c.getAttribute("data-sortable")&&e.setupClickableTH(a,c,b);return a}},setupClickableTH:function(a,d,f){var g,h,i,j,k,l;for(i=e.getColumnType(a,f),h=function(b){var c,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;if(b.handled===!0)return!1;for(b.handled=!0,m="true"===this.getAttribute("data-sorted"),n=this.getAttribute("data-sorted-direction"),h=m?"ascending"===n?"descending":"ascending":i.defaultSortDirection,p=this.parentNode.querySelectorAll("th"),s=0,w=p.length;s<w;s++)d=p[s],d.setAttribute("data-sorted","false"),d.removeAttribute("data-sorted-direction");if(this.setAttribute("data-sorted","true"),this.setAttribute("data-sorted-direction",h),o=a.tBodies[0],l=[],m){for(D=o.rows,v=0,z=D.length;v<z;v++)g=D[v],l.push(g);for(l.reverse(),B=0,A=l.length;B<A;B++)k=l[B],o.appendChild(k)}else{for(r=null!=i.compare?i.compare:function(a,b){return b-a},c=function(a,b){return a[0]===b[0]?a[2]-b[2]:i.reverse?r(b[0],a[0]):r(a[0],b[0])},C=o.rows,j=t=0,x=C.length;t<x;j=++t)k=C[j],q=e.getNodeValue(k.cells[f]),null!=i.comparator&&(q=i.comparator(q)),l.push([q,k,j]);for(l.sort(c),u=0,y=l.length;u<y;u++)k=l[u],o.appendChild(k[1])}return"function"==typeof window.CustomEvent&&"function"==typeof a.dispatchEvent?a.dispatchEvent(new CustomEvent("Sortable.sorted",{bubbles:!0})):void 0},l=[],j=0,k=c.length;j<k;j++)g=c[j],l.push(b(d,g,h));return l},getColumnType:function(a,b){var c,d,f,g,h,i,j,k,l,m,n;if(null!=(d=null!=(l=a.querySelectorAll("th")[b])?l.getAttribute("data-sortable-type"):void 0))return e.typesObject[d];for(m=a.tBodies[0].rows,h=0,j=m.length;h<j;h++)for(c=m[h],f=e.getNodeValue(c.cells[b]),n=e.types,i=0,k=n.length;i<k;i++)if(g=n[i],g.match(f))return g;return e.typesObject.alpha},getNodeValue:function(a){var b;return a?(b=a.getAttribute("data-value"),null!==b?b:void 0!==a.innerText?a.innerText.replace(g,""):a.textContent.replace(g,"")):""},setupTypes:function(a){var b,c,d,f;for(e.types=a,e.typesObject={},f=[],c=0,d=a.length;c<d;c++)b=a[c],f.push(e.typesObject[b.name]=b);return f}},e.setupTypes([{name:"numeric",defaultSortDirection:"descending",match:function(a){return a.match(d)},comparator:function(a){return parseFloat(a.replace(/[^0-9.-]/g,""),10)||0}},{name:"date",defaultSortDirection:"ascending",reverse:!0,match:function(a){return!isNaN(Date.parse(a))},comparator:function(a){return Date.parse(a)||0}},{name:"alpha",defaultSortDirection:"ascending",match:function(){return!0},compare:function(a,b){return a.localeCompare(b)}}]),e},h=function(a){c.tHead.getElementsByTagName("th")[a].click()},i=function(a){var b,c,e=0;if("string"==typeof a)c=a;else{c=document.getElementById("logTableFilter").value}c=c.toUpperCase();for(var f=d.getElementsByTagName("tr"),g=0;g<f.length;g++){b=f[g].getElementsByTagName("td");for(var h=0;h<b.length;h++)if(b[h]){if(b[h].innerHTML.toUpperCase().indexOf(c)>-1){f[g].style.display="",e++;break}h===b.length-1&&(f[g].style.display="none")}}return e},j=function(){f=0,d.innerHTML=""},k=function(a){return a?a:""},l=function(a,b,c,e,g){var h=d.insertRow(-1);h.className="log-table-row",h.innerHTML="<td>"+f+"</td><td>"+g.toLocaleString()+"</td><td>"+k(a)+"</td><td>"+k(b)+"</td><td>"+c+"</td><td>"+e.name+"</td>",f++};return a&&a.container?b=a.container:(b=document.createElement("div"),b.style.width="100%",b.style["z-index"]="9999999",document.body.appendChild(b)),function(){var a=document.createElement("style");b.appendChild(a),a.innerHTML="#logTable{border-collapse: collapse; height: 100%; width: 100%; display: block; overflow: auto;}.log-table-row td{border: 1px solid black;} .log-table-row:nth-child(even){background-color: #d3d3d3}.log-table-row:hover {background-color: #ffffe0}.log-table-header {background-color: #90ee90;}.log-table-header th[data-sortable='false']{cursor: auto;}.log-table-header th{border: 1px solid black; cursor: pointer;}.log-table-header th[data-sorted='true']:after {visibility: visible;}.log-table-header th[data-sorted-direction='descending']:after {border-top-color: inherit;margin-top: 8px;}.log-table-header th[data-sorted-direction='ascending']:after {border-bottom-color: inherit;margin-top: 3px;}.log-table-header th:after {content: ''; visibility: hidden;\tdisplay: inline-block; vertical-align: inherit; height: 0; width: 0; border-width: 5px;\tborder-style: solid; border-color: transparent;\tmargin-right: 1px; margin-left: 10px; float: right;}#logTableFilter {font-size: 16px; padding: 5px 5px 5px 10px; border: 1px solid #ddd; margin: 0 0 12px 0;}#logTableClear {padding: 4px 32px; display: inline-block; cursor: pointer; font-size: 16px; margin: 0 16px 12px 0}";var f=document.createElement("button");f.innerHTML="Clear",f.setAttribute("id","logTableClear"),f.addEventListener("click",j),b.appendChild(f);var h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("id","logTableFilter"),h.setAttribute("placeholder","Filter"),h.addEventListener("keyup",i),b.appendChild(h),c=document.createElement("table"),c.id="logTable",c.innerHTML='<thead class="log-table-header"><tr><th>Order</th><th>Date</th><th>Module</th><th>Scope</th><th style="width:100%;">Message</th><th>Level</th></tr></thead><tbody class="log-table-body"></tbody>',b.appendChild(c),d=c.tBodies[0],e=g(),e.initTable(c)}(),{type:"html",write:function(a,b,c){l(c.module,c.scope,a,b,c.date)},sort:h,filter:i,clear:j}},h=function(a){this.settings={},this.handlers=[],this.capturedLogs=[],this.id=a.id,this.settings.captureLogsLimit=b.defaultCaptureLogsLimit,a.captureLogs&&(a.captureLogsLimit&&this.captureLogsLimit(a.captureLogsLimit),this.flushCapturedLogsOnLimit(a.flushCapturedLogsOnLimit),this.captureLogs(!0)),a.handlers&&a.handlers.constructor===Array&&a.handlers.forEach(function(a){"function"==typeof a?this.handlers.push({type:"custom",write:a}):this.handlers.push(a)}.bind(this)),0!=a.logToConsole&&this.handlers.push(e()),a.logToHtml&&this.handlers.push(g({container:a.logToHtml.container})),a.logToService&&this.handlers.push(f(a.logToService)),a.formatter?this.formatter=a.formatter:0!=a.useFormatter&&(this.formatter=d),a.logLevel?this.logLevel(a.logLevel.toUpperCase()):this.logLevel(b.defaultLogLevel),a.module&&(this.settings.module=a.module),a.collectConsoleLogs&&k.call(this)},i=h.prototype;i.logLevel=function(a){return"string"==typeof a&&a in b.logLevels?this.settings.logLevel=b.logLevels[a]:a&&a.name in b.logLevels&&(this.settings.logLevel=b.logLevels[a.name]),this.settings.logLevel.name},i.captureLogs=function(a){this.settings.captureLogs=a},i.captureLogsLimit=function(a){this.settings.captureLogsLimit=a},i.flushCapturedLogsOnLimit=function(a){this.settings.flushCapturedLogsOnLimit=a},i.debug=function(a,c,d){return this.trigger(a,b.logLevels.DEBUG,c,d)},i.info=function(a,c,d){return this.trigger(a,b.logLevels.INFO,c,d)},i.warn=function(a,c,d){return this.trigger(a,b.logLevels.WARN,c,d)},i.error=function(a,c,d){return this.trigger(a,b.logLevels.ERROR,c,d)},i.time=function(a,c,d){return this.trigger(a,b.logLevels.TIME,c,d)},i.timeEnd=function(a,c,d){return this.trigger([a,"end"],b.logLevels.TIME,c,d)},i.trigger=function(a,b,c,d){if(this.settings.captureLogs&&(this.capturedLogs.push({message:a,level:b,data:c}),this.capturedLogs.length>=this.settings.captureLogsLimit&&(this.settings.flushCapturedLogsOnLimit?this.flushCapturedLogs(this.settings.flushCapturedLogsOnLimit.logLevel,this.settings.flushCapturedLogsOnLimit.handlerTypes):this.capturedLogs.shift())),a&&m.call(this,b)){var e=c||{};e.module=this.settings.module,e.date=new Date,this.formatter&&!l(c)&&(a=this.formatter(a,e)),this.handlers&&this.handlers.constructor===Array&&this.handlers.forEach(function(e){l(c)&&"console"==e.type||j(e,a,b,c,d)})}else d&&d(!1)},i.getCapturedLogs=function(){return this.capturedLogs},i.flushCapturedLogs=function(a,c,d){var e,f=this,g=0;e=b.logLevels[a.toUpperCase()],e||(e=b.defaultFlushLogLevel),this.capturedLogs.forEach(function(a){a.level.value>=e.value&&(g++,c&&c.forEach(function(b){j(f.getHandlerByType(b),a.message,a.level,a.data)}))}),this.capturedLogs=[],d&&d(g)},i.getHandlerByType=function(a){var b;return this.handlers.some(function(c){if(c.type===a)return b=c,!0}),b},i.getHandlerTypes=function(){return this.handlers.map(function(a){return a.type})};var j=function(a,b,c,d,e){a&&(a.asyncWrite?a.asyncWrite(b,c,d,function(){e&&e(!0)}):(a.write(b,c,d),e&&e(!0)))},k=function(){var a=this;if(console.log){var c=console.log;console.log=function(d,e){e&&e.noCollect||a.trigger(d,b.logLevels.DEBUG,{collected:!0}),c.apply(console,arguments)}}if(console.debug){var d=console.debug;console.debug=function(c,e){e&&e.noCollect||a.trigger(c,b.logLevels.DEBUG,{collected:!0}),d.apply(console,arguments)}}if(console.info){var e=console.info;console.info=function(c,d){d&&d.noCollect||a.trigger(c,b.logLevels.INFO,{collected:!0}),e.apply(console,arguments)}}if(console.time){var f=console.time;console.time=function(c,d){d&&d.noCollect||a.trigger(c,b.logLevels.TIME,{collected:!0}),f.apply(console,arguments)}}if(console.timeEnd){var g=console.timeEnd;console.timeEnd=function(c,d){d&&d.noCollect||a.trigger(c,b.logLevels.TIME,{collected:!0}),g.apply(console,arguments)}}if(console.warn){var h=console.warn;console.warn=function(c,d){d&&d.noCollect||a.trigger(c,b.logLevels.WARN,{collected:!0}),h.apply(console,arguments)}}if(console.error){var i=console.error;console.error=function(c,d){d&&d.noCollect||a.trigger(c,b.logLevels.ERROR,{collected:!0}),i.apply(console,arguments)}}},l=function(a){return a&&a.collected},m=function(a){var b=this.settings.logLevel;return a.value>=b.value},n=function(b){b?b.id||(b.id="logger"+c):b={id:"logger"+c};var d=new h(b);return a[d.id]=d,c++,d},o=function(b){return a[b]};return b.logLevels={},b.logLevels.DEBUG={value:1,name:"DEBUG"},b.logLevels.INFO={value:2,name:"INFO"},b.logLevels.TIME={value:3,name:"TIME"},b.logLevels.WARN={value:4,name:"WARN"},b.logLevels.ERROR={value:5,name:"ERROR"},b.logLevels.FATAL={value:9,name:"FATAL"},b.logLevels.OFF={value:10,name:"OFF"},b.defaultLogLevel=b.logLevels.OFF,b.defaultFlushLogLevel=b.logLevels.DEBUG,b.defaultCaptureLogsLimit=1e3,b.defaultServiceHeaders={"Content-Type":"application/json"},b.defaultTimeout=2e3,b.defaultBatchSize=1e3,b.minTimeframe=.1,{create:n,getLoggerById:o,consts:b}});